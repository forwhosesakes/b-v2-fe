import{a as ht,b as ve,g as bt,n as Qe,S as xt,p as wt,u as Dt,c as Ot,j as d}from"./index-BX3EFCBa.js";import{R as T,g as jt,r as p}from"./vendor-BiG2MsIL.js";import Et from"./upload-Dot1hF6n.js";import At from"./add-DUHxxazt.js";import{s as Ft,h as _t}from"./httpClient-Cejv5jVd.js";import{C as Rt}from"./circular-progress-BUZnmBCH.js";/* empty css             */var Ct=function(e){ht(t,e);function t(o,i){var n;return n=e.call(this)||this,n.client=o,n.setOptions(i),n.bindMethods(),n.updateResult(),n}var r=t.prototype;return r.bindMethods=function(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)},r.setOptions=function(i){this.options=this.client.defaultMutationOptions(i)},r.onUnsubscribe=function(){if(!this.listeners.length){var i;(i=this.currentMutation)==null||i.removeObserver(this)}},r.onMutationUpdate=function(i){this.updateResult();var n={listeners:!0};i.type==="success"?n.onSuccess=!0:i.type==="error"&&(n.onError=!0),this.notify(n)},r.getCurrentResult=function(){return this.currentResult},r.reset=function(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})},r.mutate=function(i,n){return this.mutateOptions=n,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,ve({},this.options,{variables:typeof i<"u"?i:this.options.variables})),this.currentMutation.addObserver(this),this.currentMutation.execute()},r.updateResult=function(){var i=this.currentMutation?this.currentMutation.state:bt(),n=ve({},i,{isLoading:i.status==="loading",isSuccess:i.status==="success",isError:i.status==="error",isIdle:i.status==="idle",mutate:this.mutate,reset:this.reset});this.currentResult=n},r.notify=function(i){var n=this;Qe.batch(function(){n.mutateOptions&&(i.onSuccess?(n.mutateOptions.onSuccess==null||n.mutateOptions.onSuccess(n.currentResult.data,n.currentResult.variables,n.currentResult.context),n.mutateOptions.onSettled==null||n.mutateOptions.onSettled(n.currentResult.data,null,n.currentResult.variables,n.currentResult.context)):i.onError&&(n.mutateOptions.onError==null||n.mutateOptions.onError(n.currentResult.error,n.currentResult.variables,n.currentResult.context),n.mutateOptions.onSettled==null||n.mutateOptions.onSettled(void 0,n.currentResult.error,n.currentResult.variables,n.currentResult.context))),i.listeners&&n.listeners.forEach(function(s){s(n.currentResult)})})},t}(xt);function St(e,t,r){var o=T.useRef(!1),i=T.useState(0),n=i[1],s=wt(e,t),l=Dt(),f=T.useRef();f.current?f.current.setOptions(s):f.current=new Ct(l,s);var u=f.current.getCurrentResult();T.useEffect(function(){o.current=!0;var g=f.current.subscribe(Qe.batchCalls(function(){o.current&&n(function(E){return E+1})}));return function(){o.current=!1,g()}},[]);var v=T.useCallback(function(g,E){f.current.mutate(g,E).catch(Ot)},[]);if(u.error&&Ft(void 0,f.current.options.useErrorBoundary,[u.error]))throw u.error;return ve({},u,{mutate:v,mutateAsync:u.mutate})}var Xe={exports:{}},Pt="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Tt=Pt,It=Tt;function Ze(){}function et(){}et.resetWarningCache=Ze;var kt=function(){function e(o,i,n,s,l,f){if(f!==It){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:et,resetWarningCache:Ze};return r.PropTypes=r,r};Xe.exports=kt();var Mt=Xe.exports;const m=jt(Mt);function I(e,t,r,o){function i(n){return n instanceof r?n:new r(function(s){s(n)})}return new(r||(r=Promise))(function(n,s){function l(v){try{u(o.next(v))}catch(g){s(g)}}function f(v){try{u(o.throw(v))}catch(g){s(g)}}function u(v){v.done?n(v.value):i(v.value).then(l,f)}u((o=o.apply(e,t||[])).next())})}function k(e,t){var r={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},o,i,n,s;return s={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function l(u){return function(v){return f([u,v])}}function f(u){if(o)throw new TypeError("Generator is already executing.");for(;s&&(s=0,u[0]&&(r=0)),r;)try{if(o=1,i&&(n=u[0]&2?i.return:u[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,u[1])).done)return n;switch(i=0,n&&(u=[u[0]&2,n.value]),u[0]){case 0:case 1:n=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(n=r.trys,!(n=n.length>0&&n[n.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!n||u[1]>n[0]&&u[1]<n[3])){r.label=u[1];break}if(u[0]===6&&r.label<n[1]){r.label=n[1],n=u;break}if(n&&r.label<n[2]){r.label=n[2],r.ops.push(u);break}n[2]&&r.ops.pop(),r.trys.pop();continue}u=t.call(e,r)}catch(v){u=[6,v],i=0}finally{o=n=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function Ne(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var o=r.call(e),i,n=[],s;try{for(;(t===void 0||t-- >0)&&!(i=o.next()).done;)n.push(i.value)}catch(l){s={error:l}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(s)throw s.error}}return n}function $e(e,t,r){if(r||arguments.length===2)for(var o=0,i=t.length,n;o<i;o++)(n||!(o in t))&&(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))}var Lt=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function U(e,t){var r=zt(e);if(typeof r.path!="string"){var o=e.webkitRelativePath;Object.defineProperty(r,"path",{value:typeof t=="string"?t:typeof o=="string"&&o.length>0?o:e.name,writable:!1,configurable:!1,enumerable:!0})}return r}function zt(e){var t=e.name,r=t&&t.lastIndexOf(".")!==-1;if(r&&!e.type){var o=t.split(".").pop().toLowerCase(),i=Lt.get(o);i&&Object.defineProperty(e,"type",{value:i,writable:!1,configurable:!1,enumerable:!0})}return e}var Nt=[".DS_Store","Thumbs.db"];function $t(e){return I(this,void 0,void 0,function(){return k(this,function(t){return X(e)&&Kt(e.dataTransfer)?[2,Bt(e.dataTransfer,e.type)]:Wt(e)?[2,Ut(e)]:Array.isArray(e)&&e.every(function(r){return"getFile"in r&&typeof r.getFile=="function"})?[2,Ht(e)]:[2,[]]})})}function Kt(e){return X(e)}function Wt(e){return X(e)&&X(e.target)}function X(e){return typeof e=="object"&&e!==null}function Ut(e){return ye(e.target.files).map(function(t){return U(t)})}function Ht(e){return I(this,void 0,void 0,function(){var t;return k(this,function(r){switch(r.label){case 0:return[4,Promise.all(e.map(function(o){return o.getFile()}))];case 1:return t=r.sent(),[2,t.map(function(o){return U(o)})]}})})}function Bt(e,t){return I(this,void 0,void 0,function(){var r,o;return k(this,function(i){switch(i.label){case 0:return e.items?(r=ye(e.items).filter(function(n){return n.kind==="file"}),t!=="drop"?[2,r]:[4,Promise.all(r.map(Gt))]):[3,2];case 1:return o=i.sent(),[2,Ke(tt(o))];case 2:return[2,Ke(ye(e.files).map(function(n){return U(n)}))]}})})}function Ke(e){return e.filter(function(t){return Nt.indexOf(t.name)===-1})}function ye(e){if(e===null)return[];for(var t=[],r=0;r<e.length;r++){var o=e[r];t.push(o)}return t}function Gt(e){if(typeof e.webkitGetAsEntry!="function")return We(e);var t=e.webkitGetAsEntry();return t&&t.isDirectory?rt(t):We(e)}function tt(e){return e.reduce(function(t,r){return $e($e([],Ne(t),!1),Ne(Array.isArray(r)?tt(r):[r]),!1)},[])}function We(e){var t=e.getAsFile();if(!t)return Promise.reject("".concat(e," is not a File"));var r=U(t);return Promise.resolve(r)}function qt(e){return I(this,void 0,void 0,function(){return k(this,function(t){return[2,e.isDirectory?rt(e):Yt(e)]})})}function rt(e){var t=e.createReader();return new Promise(function(r,o){var i=[];function n(){var s=this;t.readEntries(function(l){return I(s,void 0,void 0,function(){var f,u,v;return k(this,function(g){switch(g.label){case 0:if(l.length)return[3,5];g.label=1;case 1:return g.trys.push([1,3,,4]),[4,Promise.all(i)];case 2:return f=g.sent(),r(f),[3,4];case 3:return u=g.sent(),o(u),[3,4];case 4:return[3,6];case 5:v=Promise.all(l.map(qt)),i.push(v),n(),g.label=6;case 6:return[2]}})})},function(l){o(l)})}n()})}function Yt(e){return I(this,void 0,void 0,function(){return k(this,function(t){return[2,new Promise(function(r,o){e.file(function(i){var n=U(i,e.fullPath);r(n)},function(i){o(i)})})]})})}var Vt=function(e,t){if(e&&t){var r=Array.isArray(t)?t:t.split(","),o=e.name||"",i=(e.type||"").toLowerCase(),n=i.replace(/\/.*$/,"");return r.some(function(s){var l=s.trim().toLowerCase();return l.charAt(0)==="."?o.toLowerCase().endsWith(l):l.endsWith("/*")?n===l.replace(/\/.*$/,""):i===l})}return!0};function Ue(e){return Xt(e)||Qt(e)||ot(e)||Jt()}function Jt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qt(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Xt(e){if(Array.isArray(e))return he(e)}function He(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,o)}return r}function Be(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?He(Object(r),!0).forEach(function(o){nt(e,o,r[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):He(Object(r)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(r,o))})}return e}function nt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function W(e,t){return tr(e)||er(e,t)||ot(e,t)||Zt()}function Zt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ot(e,t){if(e){if(typeof e=="string")return he(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return he(e,t)}}function he(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,o=new Array(t);r<t;r++)o[r]=e[r];return o}function er(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var o=[],i=!0,n=!1,s,l;try{for(r=r.call(e);!(i=(s=r.next()).done)&&(o.push(s.value),!(t&&o.length===t));i=!0);}catch(f){n=!0,l=f}finally{try{!i&&r.return!=null&&r.return()}finally{if(n)throw l}}return o}}function tr(e){if(Array.isArray(e))return e}var rr="file-invalid-type",nr="file-too-large",or="file-too-small",ir="too-many-files",ar=function(t){t=Array.isArray(t)&&t.length===1?t[0]:t;var r=Array.isArray(t)?"one of ".concat(t.join(", ")):t;return{code:rr,message:"File type must be ".concat(r)}},Ge=function(t){return{code:nr,message:"File is larger than ".concat(t," ").concat(t===1?"byte":"bytes")}},qe=function(t){return{code:or,message:"File is smaller than ".concat(t," ").concat(t===1?"byte":"bytes")}},sr={code:ir,message:"Too many files"};function it(e,t){var r=e.type==="application/x-moz-file"||Vt(e,t);return[r,r?null:ar(t)]}function at(e,t,r){if(_(e.size))if(_(t)&&_(r)){if(e.size>r)return[!1,Ge(r)];if(e.size<t)return[!1,qe(t)]}else{if(_(t)&&e.size<t)return[!1,qe(t)];if(_(r)&&e.size>r)return[!1,Ge(r)]}return[!0,null]}function _(e){return e!=null}function ur(e){var t=e.files,r=e.accept,o=e.minSize,i=e.maxSize,n=e.multiple,s=e.maxFiles,l=e.validator;return!n&&t.length>1||n&&s>=1&&t.length>s?!1:t.every(function(f){var u=it(f,r),v=W(u,1),g=v[0],E=at(f,o,i),M=W(E,1),L=M[0],z=l?l(f):null;return g&&L&&!z})}function Z(e){return typeof e.isPropagationStopped=="function"?e.isPropagationStopped():typeof e.cancelBubble<"u"?e.cancelBubble:!1}function Q(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,function(t){return t==="Files"||t==="application/x-moz-file"}):!!e.target&&!!e.target.files}function Ye(e){e.preventDefault()}function cr(e){return e.indexOf("MSIE")!==-1||e.indexOf("Trident/")!==-1}function lr(e){return e.indexOf("Edge/")!==-1}function fr(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return cr(e)||lr(e)}function j(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(o){for(var i=arguments.length,n=new Array(i>1?i-1:0),s=1;s<i;s++)n[s-1]=arguments[s];return t.some(function(l){return!Z(o)&&l&&l.apply(void 0,[o].concat(n)),Z(o)})}}function pr(){return"showOpenFilePicker"in window}function dr(e){if(_(e)){var t=Object.entries(e).filter(function(r){var o=W(r,2),i=o[0],n=o[1],s=!0;return st(i)||(console.warn('Skipped "'.concat(i,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),s=!1),(!Array.isArray(n)||!n.every(ut))&&(console.warn('Skipped "'.concat(i,'" because an invalid file extension was provided.')),s=!1),s}).reduce(function(r,o){var i=W(o,2),n=i[0],s=i[1];return Be(Be({},r),{},nt({},n,s))},{});return[{description:"Files",accept:t}]}return e}function mr(e){if(_(e))return Object.entries(e).reduce(function(t,r){var o=W(r,2),i=o[0],n=o[1];return[].concat(Ue(t),[i],Ue(n))},[]).filter(function(t){return st(t)||ut(t)}).join(",")}function gr(e){return e instanceof DOMException&&(e.name==="AbortError"||e.code===e.ABORT_ERR)}function vr(e){return e instanceof DOMException&&(e.name==="SecurityError"||e.code===e.SECURITY_ERR)}function st(e){return e==="audio/*"||e==="video/*"||e==="image/*"||e==="text/*"||/\w+\/[-+.\w]+/g.test(e)}function ut(e){return/^.*\.[\w]+$/.test(e)}var yr=["children"],hr=["open"],br=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],xr=["refKey","onChange","onClick"];function wr(e){return jr(e)||Or(e)||ct(e)||Dr()}function Dr(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Or(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function jr(e){if(Array.isArray(e))return be(e)}function ge(e,t){return Fr(e)||Ar(e,t)||ct(e,t)||Er()}function Er(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ct(e,t){if(e){if(typeof e=="string")return be(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return be(e,t)}}function be(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,o=new Array(t);r<t;r++)o[r]=e[r];return o}function Ar(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var o=[],i=!0,n=!1,s,l;try{for(r=r.call(e);!(i=(s=r.next()).done)&&(o.push(s.value),!(t&&o.length===t));i=!0);}catch(f){n=!0,l=f}finally{try{!i&&r.return!=null&&r.return()}finally{if(n)throw l}}return o}}function Fr(e){if(Array.isArray(e))return e}function Ve(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,o)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Ve(Object(r),!0).forEach(function(o){xe(e,o,r[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ve(Object(r)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(r,o))})}return e}function xe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ee(e,t){if(e==null)return{};var r=_r(e,t),o,i;if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(i=0;i<n.length;i++)o=n[i],!(t.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(e,o)&&(r[o]=e[o])}return r}function _r(e,t){if(e==null)return{};var r={},o=Object.keys(e),i,n;for(n=0;n<o.length;n++)i=o[n],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}var De=p.forwardRef(function(e,t){var r=e.children,o=ee(e,yr),i=ft(o),n=i.open,s=ee(i,hr);return p.useImperativeHandle(t,function(){return{open:n}},[n]),T.createElement(p.Fragment,null,r(y(y({},s),{},{open:n})))});De.displayName="Dropzone";var lt={disabled:!1,getFilesFromEvent:$t,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0,autoFocus:!1};De.defaultProps=lt;De.propTypes={children:m.func,accept:m.objectOf(m.arrayOf(m.string)),multiple:m.bool,preventDropOnDocument:m.bool,noClick:m.bool,noKeyboard:m.bool,noDrag:m.bool,noDragEventsBubbling:m.bool,minSize:m.number,maxSize:m.number,maxFiles:m.number,disabled:m.bool,getFilesFromEvent:m.func,onFileDialogCancel:m.func,onFileDialogOpen:m.func,useFsAccessApi:m.bool,autoFocus:m.bool,onDragEnter:m.func,onDragLeave:m.func,onDragOver:m.func,onDrop:m.func,onDropAccepted:m.func,onDropRejected:m.func,onError:m.func,validator:m.func};var we={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function ft(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=y(y({},lt),e),r=t.accept,o=t.disabled,i=t.getFilesFromEvent,n=t.maxSize,s=t.minSize,l=t.multiple,f=t.maxFiles,u=t.onDragEnter,v=t.onDragLeave,g=t.onDragOver,E=t.onDrop,M=t.onDropAccepted,L=t.onDropRejected,z=t.onFileDialogCancel,te=t.onFileDialogOpen,Oe=t.useFsAccessApi,je=t.autoFocus,re=t.preventDropOnDocument,Ee=t.noClick,ne=t.noKeyboard,Ae=t.noDrag,A=t.noDragEventsBubbling,oe=t.onError,N=t.validator,$=p.useMemo(function(){return mr(r)},[r]),Fe=p.useMemo(function(){return dr(r)},[r]),ie=p.useMemo(function(){return typeof te=="function"?te:Je},[te]),H=p.useMemo(function(){return typeof z=="function"?z:Je},[z]),x=p.useRef(null),O=p.useRef(null),pt=p.useReducer(Rr,we),_e=ge(pt,2),ae=_e[0],w=_e[1],dt=ae.isFocused,Re=ae.isFileDialogActive,B=p.useRef(typeof window<"u"&&window.isSecureContext&&Oe&&pr()),Ce=function(){!B.current&&Re&&setTimeout(function(){if(O.current){var c=O.current.files;c.length||(w({type:"closeDialog"}),H())}},300)};p.useEffect(function(){return window.addEventListener("focus",Ce,!1),function(){window.removeEventListener("focus",Ce,!1)}},[O,Re,H,B]);var R=p.useRef([]),Se=function(c){x.current&&x.current.contains(c.target)||(c.preventDefault(),R.current=[])};p.useEffect(function(){return re&&(document.addEventListener("dragover",Ye,!1),document.addEventListener("drop",Se,!1)),function(){re&&(document.removeEventListener("dragover",Ye),document.removeEventListener("drop",Se))}},[x,re]),p.useEffect(function(){return!o&&je&&x.current&&x.current.focus(),function(){}},[x,je,o]);var F=p.useCallback(function(a){oe?oe(a):console.error(a)},[oe]),Pe=p.useCallback(function(a){a.preventDefault(),a.persist(),V(a),R.current=[].concat(wr(R.current),[a.target]),Q(a)&&Promise.resolve(i(a)).then(function(c){if(!(Z(a)&&!A)){var h=c.length,b=h>0&&ur({files:c,accept:$,minSize:s,maxSize:n,multiple:l,maxFiles:f,validator:N}),D=h>0&&!b;w({isDragAccept:b,isDragReject:D,isDragActive:!0,type:"setDraggedFiles"}),u&&u(a)}}).catch(function(c){return F(c)})},[i,u,F,A,$,s,n,l,f,N]),Te=p.useCallback(function(a){a.preventDefault(),a.persist(),V(a);var c=Q(a);if(c&&a.dataTransfer)try{a.dataTransfer.dropEffect="copy"}catch{}return c&&g&&g(a),!1},[g,A]),Ie=p.useCallback(function(a){a.preventDefault(),a.persist(),V(a);var c=R.current.filter(function(b){return x.current&&x.current.contains(b)}),h=c.indexOf(a.target);h!==-1&&c.splice(h,1),R.current=c,!(c.length>0)&&(w({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),Q(a)&&v&&v(a))},[x,v,A]),G=p.useCallback(function(a,c){var h=[],b=[];a.forEach(function(D){var K=it(D,$),P=ge(K,2),ue=P[0],ce=P[1],le=at(D,s,n),J=ge(le,2),fe=J[0],pe=J[1],de=N?N(D):null;if(ue&&fe&&!de)h.push(D);else{var me=[ce,pe];de&&(me=me.concat(de)),b.push({file:D,errors:me.filter(function(yt){return yt})})}}),(!l&&h.length>1||l&&f>=1&&h.length>f)&&(h.forEach(function(D){b.push({file:D,errors:[sr]})}),h.splice(0)),w({acceptedFiles:h,fileRejections:b,type:"setFiles"}),E&&E(h,b,c),b.length>0&&L&&L(b,c),h.length>0&&M&&M(h,c)},[w,l,$,s,n,f,E,M,L,N]),q=p.useCallback(function(a){a.preventDefault(),a.persist(),V(a),R.current=[],Q(a)&&Promise.resolve(i(a)).then(function(c){Z(a)&&!A||G(c,a)}).catch(function(c){return F(c)}),w({type:"reset"})},[i,G,F,A]),C=p.useCallback(function(){if(B.current){w({type:"openDialog"}),ie();var a={multiple:l,types:Fe};window.showOpenFilePicker(a).then(function(c){return i(c)}).then(function(c){G(c,null),w({type:"closeDialog"})}).catch(function(c){gr(c)?(H(c),w({type:"closeDialog"})):vr(c)?(B.current=!1,O.current?(O.current.value=null,O.current.click()):F(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):F(c)});return}O.current&&(w({type:"openDialog"}),ie(),O.current.value=null,O.current.click())},[w,ie,H,Oe,G,F,Fe,l]),ke=p.useCallback(function(a){!x.current||!x.current.isEqualNode(a.target)||(a.key===" "||a.key==="Enter"||a.keyCode===32||a.keyCode===13)&&(a.preventDefault(),C())},[x,C]),Me=p.useCallback(function(){w({type:"focus"})},[]),Le=p.useCallback(function(){w({type:"blur"})},[]),ze=p.useCallback(function(){Ee||(fr()?setTimeout(C,0):C())},[Ee,C]),S=function(c){return o?null:c},se=function(c){return ne?null:S(c)},Y=function(c){return Ae?null:S(c)},V=function(c){A&&c.stopPropagation()},mt=p.useMemo(function(){return function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},c=a.refKey,h=c===void 0?"ref":c,b=a.role,D=a.onKeyDown,K=a.onFocus,P=a.onBlur,ue=a.onClick,ce=a.onDragEnter,le=a.onDragOver,J=a.onDragLeave,fe=a.onDrop,pe=ee(a,br);return y(y(xe({onKeyDown:se(j(D,ke)),onFocus:se(j(K,Me)),onBlur:se(j(P,Le)),onClick:S(j(ue,ze)),onDragEnter:Y(j(ce,Pe)),onDragOver:Y(j(le,Te)),onDragLeave:Y(j(J,Ie)),onDrop:Y(j(fe,q)),role:typeof b=="string"&&b!==""?b:"presentation"},h,x),!o&&!ne?{tabIndex:0}:{}),pe)}},[x,ke,Me,Le,ze,Pe,Te,Ie,q,ne,Ae,o]),gt=p.useCallback(function(a){a.stopPropagation()},[]),vt=p.useMemo(function(){return function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},c=a.refKey,h=c===void 0?"ref":c,b=a.onChange,D=a.onClick,K=ee(a,xr),P=xe({accept:$,multiple:l,type:"file",style:{display:"none"},onChange:S(j(b,q)),onClick:S(j(D,gt)),tabIndex:-1},h,O);return y(y({},P),K)}},[O,r,l,q,o]);return y(y({},ae),{},{isFocused:dt&&!o,getRootProps:mt,getInputProps:vt,rootRef:x,inputRef:O,open:S(C)})}function Rr(e,t){switch(t.type){case"focus":return y(y({},e),{},{isFocused:!0});case"blur":return y(y({},e),{},{isFocused:!1});case"openDialog":return y(y({},we),{},{isFileDialogActive:!0});case"closeDialog":return y(y({},e),{},{isFileDialogActive:!1});case"setDraggedFiles":return y(y({},e),{},{isDragActive:t.isDragActive,isDragAccept:t.isDragAccept,isDragReject:t.isDragReject});case"setFiles":return y(y({},e),{},{acceptedFiles:t.acceptedFiles,fileRejections:t.fileRejections});case"reset":return y({},we);default:return e}}function Je(){}const Cr=async e=>await _t({method:"post",url:"/inference/general/",data:e,headers:{"Content-Type":"multipart/form-data"}}),Sr=()=>St({mutationFn:async([e,t])=>{const o=await(await fetch(e)).blob();let i=new FormData;return i.append("file",o,`temp.${t}`),(await Cr(i)).data.url}}),Pr=e=>d.jsxs("div",{className:"relative w-full h-full flex justify-center items-center",children:[d.jsx("div",{className:"w-20 h-20",children:e.overlayCondition&&d.jsx(e.progressComponent,{})}),e.mediaType==="image"?d.jsx("img",{className:"z-10 w-full h-full object-cover rounded-lg absolute inset-0",src:e.mediaSrc}):d.jsx("video",{className:"z-10 w-full h-full object-cover rounded-lg absolute inset-0",controls:!0,children:d.jsx("source",{src:e.mediaSrc})})]}),$r=()=>{const{mutate:e,isLoading:t,data:r,reset:o}=Sr(),[i,n]=p.useState(null),s=p.useCallback(([g])=>{n({type:g.type.split("/")[0],uploadedPath:URL.createObjectURL(g)})},[]),{getRootProps:l,getInputProps:f}=ft({onDrop:s,maxFiles:1,accept:{"image/png":[".png"],"image/jpeg":[".jpeg",".jpg"],"video/mp4":[".mp4"],"image/svg+xml":[".svg"],"video/webm":[".webm"],"image/webp":[".webp"]}}),u=async()=>{e([i.uploadedPath,(i==null?void 0:i.type)==="image"?"jpeg":"mp4"])},v=()=>{i&&n(g=>({...g,uploadedPath:""})),o()};return d.jsxs("section",{className:"m-5 flex flex-col items-center rounded-xl bg-landing-page-image bg-cover pt-36 text-center",children:[d.jsxs("div",{className:"flex w-full md:flex-row flex-col",children:[d.jsx("div",{className:"UploadContainer align-items-center m-5 flex h-[60vh] w-full flex-col justify-center rounded-lg border border-turquoise bg-detection-gradient bg-cover",children:!i||!i.uploadedPath?d.jsxs("div",{className:"w-100 flex flex-1 flex-col items-center justify-center p-5 text-center",...l(),children:[d.jsx("input",{...f()}),d.jsx(Et,{}),d.jsxs("p",{className:"my-5 font-medium",children:[" ","اسحب و أفلت الملفات هنا للتحليل"]}),d.jsxs("p",{className:"my-5 flex w-32 justify-between",children:[d.jsx("span",{className:"text-turquoise",children:"تحميل ملف"}),d.jsx(At,{})]})]}):d.jsx("div",{className:"h-full w-full",children:d.jsx(Pr,{mediaType:i.type,mediaSrc:i.uploadedPath,progressComponent:Rt,overlayCondition:t})})}),d.jsx("div",{className:"InferenceConatiner align-items-center m-5 flex h-[60vh] w-full flex-col justify-center rounded-lg border border-turquoise bg-detection-gradient bg-cover",children:d.jsxs("div",{className:"relative h-full w-full",children:[(i==null?void 0:i.type)==="image"&&r&&d.jsx("img",{className:"absolute inset-0 h-full w-full rounded-lg object-cover",src:r}),(i==null?void 0:i.type)==="video"&&r&&d.jsxs("video",{className:"absolute inset-0 h-full w-full rounded-3xl object-cover",width:"auto",height:"auto",controls:!0,children:[d.jsx("source",{src:r})," "]})]})})]}),d.jsxs("div",{className:"flex w-fit flex-row justify-between gap-6",children:[!r&&d.jsx("button",{onClick:u,className:"button button-primary button-container w-fit px-16 py-2 hover:shadow-inner",children:d.jsx("span",{className:"button-gradient-text",children:"الكشف"})}),d.jsx("button",{onClick:v,className:"button button-primary button-container w-fit px-16 py-2 hover:shadow-inner",children:d.jsx("span",{className:"button-gradient-text",children:"مسح"})})]})]})};export{$r as default};
